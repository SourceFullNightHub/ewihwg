if game:GetService("Players").LocalPlayer.PlayerGui.Main:FindFirstChild("ChooseTeam") then
    repeat
        wait()
        if game:GetService("Players").LocalPlayer.PlayerGui:WaitForChild("Main").ChooseTeam.Visible == true then
            if getgenv().Team == "Pirates" then
                for i, v in pairs(
                    getconnections(
                        game:GetService("Players").LocalPlayer.PlayerGui.Main.ChooseTeam.Container["Pirates"].Frame.TextButton.Activated
                    )
                ) do
                    for a, b in pairs(getconnections(game:GetService("UserInputService").TouchTapInWorld)) do
                        b:Fire()
                    end
                    v.Function()
                end
            else
                for i, v in pairs(
                    getconnections(
                        game:GetService("Players").LocalPlayer.PlayerGui.Main.ChooseTeam.Container["Marines"].Frame.TextButton.Activated
                    )
                ) do
                    for a, b in pairs(getconnections(game:GetService("UserInputService").TouchTapInWorld)) do
                        b:Fire()
                    end
                    v.Function()
                end
            end
        end
    until game.Players.LocalPlayer.Team ~= nil and game:IsLoaded()
end

--------------------------------------------------------------------------------------------------------------------------

local Settings = {}
local HttpService = game:GetService("HttpService")
local FolderName = "Sitinks Hub"
local NameGameFile = "-BloxFruit.json"
local SaveFileName = game.Players.LocalPlayer.Name..NameGameFile
local SettingHopServer = {}
local DefaultSettingHopServer = {}
function SaveSettings(fff,fff2)
    if fff~=nil then
        Settings[fff] = fff2
    end
    HttpService = game:GetService("HttpService")
    if not isfolder(FolderName) then
        makefolder(FolderName)
    end
    writefile(FolderName.."/" .. SaveFileName, HttpService:JSONEncode(Settings))
end

function ReadSetting()
local s,e = pcall(function()
    HttpService = game:GetService("HttpService")
    if not isfolder(FolderName) then
        makefolder(FolderName)
    end
    return HttpService:JSONDecode(readfile(FolderName.."/" .. SaveFileName))
end)
if s then return e
else
    SaveSettings()
    return ReadSetting()
end
end
Configs = ReadSetting()
if not pcall(function() readfile(FolderName.."/" .. "Jobid.json") end) then
    writefile(FolderName.."/" .. "Jobid.json", game:GetService("HttpService"):JSONEncode(DefaultSettingHopServer))
end
function CheckJobIdServer()
    local mmb = {}
    for i,v in next,game:GetService("HttpService"):JSONDecode(readfile(FolderName.."/" .. "Jobid.json")) do
        table.insert(mmb,i) 
    end
    return mmb 
end

--------------------------------------------------------------------------------------------------------------------------

local plr = game.Players.LocalPlayer
local lp = game.Players
local WS = game.Workspace
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CombatFramework = require(Players.LocalPlayer.PlayerScripts:WaitForChild("CombatFramework"))
local CombatFrameworkR = getupvalues(CombatFramework)[2]
local Rc = game.ReplicatedStorage
local Notifygame = require(game.ReplicatedStorage:WaitForChild("Notification"))
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/SourceFullNightHub/ewihwg/main/l"))()
FastKillTrial = loadstring(game:HttpGet("https://raw.githubusercontent.com/SourceFullNightHub/ewihwg/main/8847hfgg"))()
local Race = plr.Data.Race.Value
local plrLevel = plr.Data.Level.Value

--------------------------------------------------------------------------------------------------------------------------

if game.PlaceId == 2753915549 then
    Sea1 = true
elseif game.PlaceId == 4442272183 then
    Sea2 = true
elseif game.PlaceId == 7449423635 then
    Sea3 = true
else
    game.Players.LocalPlayer:Kick("Not Support This Game!")
end

BladeHits = function(Value)
    local Hits = {}
    for _, Hit in ipairs(Workspace.Enemies:GetChildren()) do
        local Humanoid = Hit and Hit:FindFirstChildOfClass("Humanoid")
        if Humanoid and Humanoid.Health > 0 then
            local RootPart = Humanoid.RootPart
            if RootPart and Players.LocalPlayer:DistanceFromCharacter(RootPart.Position) < Value then
                table.insert(Hits, RootPart)
            end
        end
    end
    return Hits
end
PlayerHits = function(Value)
    local Hits = {}
    for _, Char in ipairs(Workspace.Characters:GetChildren()) do
        if Char.Name ~= Players.LocalPlayer.Name then
            local Humanoid = Char and Char:FindFirstChildOfClass("Humanoid")
            if Humanoid and Humanoid.RootPart and Humanoid.Health > 0 then
                if Players.LocalPlayer:DistanceFromCharacter(Humanoid.RootPart.Position) < Value then
                    table.insert(Hits, Humanoid.RootPart)
                end
            end
        end
    end
    return Hits
end
AddAttack = function(Hit)
    local ac = CombatFrameworkR.activeController
    if ac and ac.equipped then
        if #Hit > 0 then
            local agrs1 = getupvalue(ac.attack, 5)
            local agrs2 = getupvalue(ac.attack, 6)
            local agrs3 = getupvalue(ac.attack, 4)
            local agrs4 = getupvalue(ac.attack, 7)
            local agrs5 = (agrs1 * 798405 + agrs3 * 727595) % agrs2
            local agrs6 = agrs3 * 798405

            agrs5 = (agrs5 * agrs2 + agrs6) % 1099511627776
            agrs1 = math.floor(agrs5 / agrs2)
            agrs3 = agrs5 - agrs1 * agrs2
            agrs4 = agrs4 + 1

            setupvalue(ac.attack, 5, agrs1)
            setupvalue(ac.attack, 6, agrs2)
            setupvalue(ac.attack, 4, agrs3)
            setupvalue(ac.attack, 7, agrs4)
            local Blade = ac.currentWeaponModel
            if Blade then
                ReplicatedStorage.RigControllerEvent:FireServer("weaponChange", Blade.Name)
                ac.animator.anims.basic[1]:Play(0.01, 0.01, 0.01)
                ReplicatedStorage.Remotes.Validator:FireServer(math.floor(agrs5 / 1099511627776 * 16777215), agrs4)
                ReplicatedStorage.RigControllerEvent:FireServer("hit", Hit, 1, "")
            end
        end
    end
end
AttackFunc = function()
    AddAttack(BladeHits(65))
    AddAttack(PlayerHits(65))
end
local Tick = tick()
local Delay = 0.25

DetectFastAttack = function()
    task.spawn(function()
        while task.wait() do 
            if (tick() - Tick) >= math.clamp(Delay, 0.100, 1) then
                task.spawn(AttackFunc)
                Tick = tick()
            end
        end 
    end)
end
DetectFastAttack()

function WaitHRP(q0) 
    if not q0 then return end
    return q0.Character:WaitForChild("HumanoidRootPart", 9) 
end 

function Tween(Pos)
    pcall(function()
        if game.Players.LocalPlayer.Character.Humanoid.Health > 0 and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            Distance = (Pos.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
            game.Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart", 9)
            game.Players.LocalPlayer.Character:WaitForChild("Head", 9)
            if not Pos then return end
            if not plr.Character:FindFirstChild("PartTele") then
                local PartTele = Instance.new("Part", plr.Character) -- Create part
                PartTele.Size = Vector3.new(10,1,10)
                PartTele.Name = "PartTele"
                PartTele.Anchored = true
                PartTele.Transparency = 1
                PartTele.CanCollide = false
                PartTele.CFrame = WaitHRP(plr).CFrame 
                PartTele:GetPropertyChangedSignal("CFrame"):Connect(function()
                    task.wait(0.01)
                    WaitHRP(plr).CFrame = PartTele.CFrame
                end)
            end
            tween = game:GetService("TweenService"):Create(game.Players.LocalPlayer.Character.PartTele, TweenInfo.new(Distance / 325, Enum.EasingStyle.Linear),{CFrame = Pos})
            if Distance <= 250 then
                tween:Cancel()
                game.Players.LocalPlayer.Character.PartTele.CFrame = Pos
            end
            tween:Play()
        end
    end)
end

spawn(function()
    while task.wait() do
        pcall(function()
            if plr.Character.Humanoid.Health <= 0 or not plr.Character:FindFirstChild("HumanoidRootPart") then
                if plr.Character:FindFirstChild("PartTele") then
                    plr.Character:FindFirstChild("PartTele"):Destroy()
                end
            end
        end)
    end
end)
spawn(function()
    while task.wait() do
        pcall(function()
            if plr.Character:FindFirstChild("PartTele") then
                if (plr.Character.HumanoidRootPart.Position - plr.Character:FindFirstChild("PartTele").Position).Magnitude >= 100 then
                    plr.Character:FindFirstChild("PartTele"):Destroy()
                end
            end
        end)
    end
end)

function Buso()
    if not plr.Character:FindFirstChild("HasBuso") then
        local args = {[1] = "Buso"}
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    end
end

function GetTool(Akiki)
    NameTool = ""
    for i, v in pairs(plr.Backpack:GetChildren()) do
        if v:IsA("Tool") and v.ToolTip == Akiki then
            NameTool = v.Name
        end
    end
    for i, v in pairs(plr.Character:GetChildren()) do
        if v:IsA("Tool") and v.ToolTip == Akiki then
            NameTool = v.Name
        end
    end
    return NameTool
end

function EquipWeapon(Tool)
    if Configs["Select Weapon"] == nil or Configs["Select Weapon"] == "" then
        Configs["Select Weapon"] = "Melee"
    end
    Tool = GetTool(Configs["Select Weapon"])
    local bucac = game.Players.LocalPlayer.Backpack:FindFirstChild(Tool)
    if bucac then
        game.Players.LocalPlayer.Character.Humanoid:EquipTool(bucac)
    end
end

function NoClip(Value)
    if Value == true then
        if not plr.Character.Head:FindFirstChild("NoClip") then
            local BodyVelocityTrash = Instance.new("BodyVelocity")
            BodyVelocityTrash.Name = "NoClip"
            BodyVelocityTrash.Parent = plr.Character.Head
            BodyVelocityTrash.Velocity = Vector3.new(0, 0, 0)
            BodyVelocityTrash.MaxForce = Vector3.new(9999999, 9999999, 9999999)
            BodyVelocityTrash.P = 15000
        end
        for i, v in pairs(plr.Character:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CanCollide = false
            end
        end
    else
        if plr.Character.Head:FindFirstChild("NoClip") then
            plr.Character.Head:FindFirstChild("NoClip"):Destroy()
        end
    end
end

function GetEnemies(a)
    if WS.Enemies:FindFirstChild(a) then
        for r, v in pairs(WS.Enemies:GetChildren()) do
            if v.Name == a then
                if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v.Parent and v:FindFirstChild("HumanoidRootPart") then
                    return v
                end
            end
        end
    end
end

function GetEnemy(aa)
    for r, v in pairs(WS.Enemies:GetChildren()) do
        if v.Name == aa then
            if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v.Parent and v:FindFirstChild("HumanoidRootPart") then
                return v
            end
        end
    end
    for r, v in pairs(Rc:GetChildren()) do
        if v.Name == aa then
            if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v.Parent and v:FindFirstChild("HumanoidRootPart") then
                return v
            end
        end
    end
end

function CheckDistance(Target1, TARGET2)
    if not TARGET2 then
        TARGET2 = plr.Character.HumanoidRootPart
    end
    dau, buoi =
    pcall(function()
        i = Target1.Position
        v = TARGET2.Position
    end)
    if dau then
        i = Target1.Position
        v = TARGET2.Position
        return (i - v).Magnitude
    end
end

function BringMon(xx)
    for i, v in pairs(WS.Enemies:GetChildren()) do
        if v.Name == xx then
            if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v.Parent and v:FindFirstChild("HumanoidRootPart") then
                if CheckDistance(v.HumanoidRootPart) <= 300 then
                    v.HumanoidRootPart.CFrame = PosBring
                    v.Humanoid.JumpPower = 0
                    v.Humanoid.WalkSpeed = 0
                    v.HumanoidRootPart.Transparency = 1
                    v.HumanoidRootPart.CanCollide = false
                    v.Head.CanCollide = false
                    if v.Humanoid:FindFirstChild("Animator") then
                        v.Humanoid.Animator:Destroy()
                    end
                    sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", math.huge)
                    v.Humanoid:ChangeState(11)
                end
            end
        end
    end
end

function KillMob(cac)
    v = GetEnemy(cac)
    if v then
        if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v.Parent and v:FindFirstChild("HumanoidRootPart") then
            repeat wait()
                Buso()
                EquipWeapon()
                NoClip(true)
                Tween(v.HumanoidRootPart.CFrame * CFrame.new(2, 15, 2))
                BringMon(cac)
            until v.Humanoid.Health <= 0 or not v.Parent
        end
    end
end

--------------------------------------------------------------------------------------------------------------------------

local Window = Library:CreateWindow({Title = "Sitinks Hub"})

local StackAutoFarmTab = Window:CreateTab({Name = "Stack Auto Farm"})

StackAutoFarmTab:CreateDropdown({
    Name = "Select Weapon",
    Description = "Select Weapon To Farm",
    Options = {"Melee", "Sword"},
    Default = Configs["Select Weapon"],
    CallBack = function(Value)
        SaveSettings("Select Weapon", Value)
    end
})

StackAutoFarmTab:CreateSection({Text = 'Farm'})

StackAutoFarmTab:CreateDropdown({
    Name = "Select Method Farm",
    Description = "",
    Options = {"Level", "Cake Prince", "Bone"},
    Default = Configs["Select Method Farm"],
    CallBack = function(Value)
        SaveSettings("Select Method Farm", Value)
    end
})

local ToggleAutoFarm = StackAutoFarmTab:CreateToggle({
    Name = "Auto Farm",
    Description = "Start Farm Method You Select",
    Default = Configs["Auto Farm"],
    Settings = true,
    CallBack = function(Value)
        SaveSettings("Auto Farm", Value)
    end
})

ToggleAutoFarm:CreateToggle({
    Name = "Double Quest",
    Default = Configs["Double Quest"],
    CallBack = function(Value)
      SaveSettings("Double Quest", Value)
   end
})

ToggleAutoFarm:CreateToggle({
    Name = "Accept Quest",
    Default = Configs["Accept Quest"],
    CallBack = function(Value)
      SaveSettings("Accept Quest", Value)
   end
})

local CakePrinceMob = {
    "Baking Staff",
    "Cookie Crafter",
    "Cake Guard",
    "Head Baker"
}

function AutoFarm()
    if Configs["Select Method Farm"] == "Cake Prince" then
        if not game:GetService("Workspace").Map.CakeLoaf.BigMirror.Other.Transparency == 1 then
            if GetEnemy("Cake Prince") then
                repeat wait()
                    KillMob("Cake Prince")
                until not GetEnemy("Cake Prince") or Configs["Select Method Farm"] ~= "Cake Prince" or game:GetService("Workspace").Map.CakeLoaf.BigMirror.Other.Transparency == 1 or Configs["Auto Farm"] == false
            end
        else
            if GetEnemies("Baking Staff") or GetEnemies("Cookie Crafter") or GetEnemies("Cake Guard") or GetEnemies("Head Baker") then
                for i,v in pairs(WS.Enemies:GetChildren()) do
                    if table.find(CakePrinceMob, v.Name) then
                        if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v.Parent and v:FindFirstChild("HumanoidRootPart") then
                            repeat wait()
                                KillMob(v.Name)
                            until v.Humanoid.Health <= 0 or not v.Parent or not game:GetService("Workspace").Map.CakeLoaf.BigMirror.Other.Transparency == 1 or Configs["Select Method Farm"] ~= "Cake Prince" or Configs["Auto Farm"] == false
                        end
                    end
                end
            else
                NoClip(true)
                Tween(CFrame.new(-2125.64282, 70.3262863, -12400.6777))
            end
        end
    end
end
